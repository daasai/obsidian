
---

# DAAS Alpha v2.0 技术白皮书

**Data As A Service Alpha Platform**

**版本**: 2.0 | **日期**: 2026-02-03

---

## 1. 产品愿景 (Executive Summary)

**DAAS Alpha** 是一个 **AI 原生 (AI-Native)** 的量化投研平台。

传统的量化开发需要程序员写几百行代码才能验证一个策略，门槛极高。DAAS v2.0 的目标是将这一过程“降维打击”：**用户只需用自然语言描述交易逻辑，系统在几秒钟内自动完成数据抓取、因子构建、历史回测，并输出资金曲线。**

我们致力于打造投资界的“钢铁侠战衣”：

- **System 1 (直觉)**：由大模型 (DeepSeek-R1) 负责理解市场叙事（如“低空经济”、“超跌反弹”）。
    
- **System 2 (逻辑)**：由高性能计算引擎 (Polars) 负责严谨的数学验证和回测。
    

---

## 2. 核心设计哲学：双院制大脑 (The Bicameral Mind)

v2.0 架构的核心在于完美融合了 **概率性的 AI** 和 **确定性的计算**。

### System 1: 感知层 (Perception Layer)

- **核心组件**：Narrative Agent (基于 DeepSeek-R1)
    
- **职责**：充当“翻译官”。它理解模糊的人类语言（如“找那些最近量价齐升且低估值的股票”），并将其转化为严谨的数学公式（DSL）。
    
- **特点**：拥有推理能力，能处理同义词（如将“固态电池”扩展为“钠离子电池”、“固态电解质”）。
    

### System 2: 执行层 (Execution Layer)

- **核心组件**：Execution Engine (基于 Polars)
    
- **职责**：充当“计算器”。它不关心含义，只关心数字。它接收 System 1 传来的公式，在海量历史数据中进行毫秒级运算。
    
- **特点**：极速、零幻觉、绝对客观。
    

---

## 3. 技术架构解析 (Architecture Deep Dive)

DAAS v2.0 采用模块化分层架构，确保了系统的稳定性与扩展性。

### 3.1 数据层 (Data Layer: The Blood)

数据是量化的血液。v2.0 实现了从“不可靠爬虫”到“工业级 API”的重大升级。

- **数据源**：全面切换至 **Tushare Pro API**，确保数据的高可用性（SLA）。
    
- **存储格式**：采用 **Parquet** 列式存储 + **Hive 分区**。
    
    - _技术解析_：我们将海量日线数据按 `year=2024`, `year=2025` 这样的文件夹物理隔离。回测 2025 年的策略时，系统只会读取 `year=2025` 的文件，而不会加载无关的历史数据，极大地降低了内存占用 (OOM) 风险。
        
- **数据内容**：
    
    - **行情数据**：开盘价、收盘价、最高价、最低价、成交量。
        
    - **基本面数据 (v2.0 新增)**：市盈率 (PE)、市净率 (PB)、总市值 (Market Cap)。这使得策略维度从纯技术面扩展到了价值投资。
        

### 3.2 引擎层 (Engine Layer: The Muscle)

这是系统的动力核心，也是最硬核的部分。

- **全向量化计算 (Vectorization)**：
    
    - _技术解析_：传统回测用 Python `for` 循环一行行处理数据，速度极慢。DAAS 引擎利用 **Polars** 库，将所有操作转化为矩阵运算（SIMD 指令集优化）。
        
    - _效果_：回测 5000 只股票、5 年历史数据，从“几分钟”缩短至“几百毫秒”。
        
- **自研 DSL (领域特定语言)**：
    
    - 为了防止 AI 写出不可执行的代码，我们定义了一套受限的数学语言。
        
    - _示例_：`Rank(Ma(close, 5))` —— 意为“对 5 日均线进行全市场排名”。
        
    - _AST 解析_：系统使用抽象语法树 (AST) 将这些字符串编译为 Polars 的计算图，支持复杂的嵌套逻辑（如 `Rank(RSI(close, 14) < 30)`）。
        

### 3.3 智能层 (Brain Layer: The Mind)

- **模型选择**：接入 NVIDIA NIM 托管的 **DeepSeek-R1** 模型。
    
- **思维链控制**：DeepSeek-R1 是推理模型，会输出 `<think>` 标签的思考过程。我们在接口层实现了“思维链剥离”，只保留最终的数学公式，确保下游引擎能直接执行。
    
- **防幻觉机制**：通过 System Prompt 植入“DSL 白名单”，强行约束 AI 只能使用系统支持的算子（如 `Ref`, `Ma`, `Std`），杜绝了 AI 瞎编函数的可能。
    

---

## 4. 关键功能亮点 (v2.0 Features)

1. **统一命令行入口 (Unified CLI)**：
    
    - 只需一个脚本 `./cli.sh` 即可完成数据初始化 (`init`)、健康体检 (`check`) 和策略运行 (`run`)。
        
2. **基本面 + 技术面双轮驱动**：
    
    - 不仅能看图（技术面），还能看财报（基本面）。比如：“买入 **低市盈率 (Low PE)** 且 **RSI 超卖** 的股票”。
        
3. **概念板块穿透**：
    
    - 支持按概念选股。输入“**AI算力**”，系统会自动匹配 Tushare 概念库中的相关股票池，不再在大海捞针。
        
4. **PIT (Point-in-Time) 正确性**：
    
    - 严格的数据时间戳管理，杜绝“未来函数”（即防止策略在 1 月份用到了 2 月份才发布的数据）。
        

---

## 5. 名词解释 (Glossary for Non-Quants)

为了帮助非量化背景的同事理解，以下是项目中高频出现的术语：

- **量化回测 (Backtesting)**：
    
    - _通俗解释_：通过历史数据来验证一个投资想法是否赚钱。就像是“通过看昨天的彩票开奖记录，来验证你的选号公式准不准”。
        
- **Alpha (阿尔法)**：
    
    - _通俗解释_：超额收益。即跑赢大盘（如沪深300指数）的那部分利润。这是量化策略追求的终极目标。
        
- **因子 (Factor)**：
    
    - _通俗解释_：选股的指标。比如“市盈率”是一个因子，“5日均线”也是一个因子。
        
- **ETL (Extract, Transform, Load)**：
    
    - _通俗解释_：数据清洗管道。把脏乱差的原始数据（Extract），洗刷干净并统一格式（Transform），最后存入仓库（Load）的过程。
        
- **Hive 分区 (Hive Partitioning)**：
    
    - _通俗解释_：一种文件整理方式。不像把所有文件都堆在桌面上，而是按“年份”归档在不同的文件夹里，找起来极快。
        
- **DSL (Domain Specific Language)**：
    
    - _通俗解释_：行业黑话。DAAS 系统内部的一套专用数学缩写，只有系统自己能听懂并执行。
        
- **夏普比率 (Sharpe Ratio)**：
    
    - _通俗解释_：衡量“性价比”的指标。收益越高、波动越小，夏普比率越高。通常大于 1.0 就算不错的策略。
        
- **最大回撤 (Max Drawdown)**：
    
    - _通俗解释_：最坏情况。如果你在策略表现最好的时候买入，最惨会亏多少钱。
        

---

## 6. 总结

DAAS Alpha v2.0 标志着我们从“手动编写代码”向“AI 辅助投研”的转型。

我们不再只是提供数据，我们提供的是 **“想法到验证”的超光速通道**。这套架构在保证了金融级数据精度的同时，极大地降低了量化研究的门槛，让每一个有交易想法的人，都能拥有量化基金经理的能力。

---

_Prepared by DAAS Architecture Team_